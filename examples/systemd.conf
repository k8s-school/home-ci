# /etc/systemd/system/home-ci.service
[Unit]
Description=Home CI Monitor - Git repository monitoring and CI service
After=network.target

[Service]
Type=simple
User=fink-ci
Group=fink-ci

# Utiliser un répertoire accessible
WorkingDirectory=/home/fink-ci
# OU si vous devez absolument rester dans /home/fink-ci :
# WorkingDirectory=/home/fink-ci

# Configuration
Environment="CONFIG_FILE=/home/fink-ci/fink-broker-config.yaml"
ExecStart=/usr/local/bin/home-ci --config $CONFIG_FILE -v 3

# Sécurité et permissions
# Donner accès au home directory si nécessaire
ProtectHome=read-only
# OU complètement ouvert si besoin :
# ProtectHome=no

# Redémarrage automatique en cas d'échec
Restart=on-failure
RestartSec=10s

# Logs
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target

